{% extends 'base.html.twig' %}

{% block title %}p4 Registration platform.{% endblock %}
{% block head %}
    <script>

        $(document).ready(function () {
            $('.selectpicker').multiselect({
                enableFiltering: true,
                templates: {
                    filter: '<div class="multiselect-filter"><div class="input-group input-group-sm p-1"><div class="input-group-prepend"><i class="input-group-text fas fa-search"></i></div><input class="form-control multiselect-search" type="text" /><div class="input-group-append"><button class="multiselect-clear-filter input-group-text" type="button"><i class="fas fa-times"></i></button></div></div></div>'
                }
            });
        });

        {# var btnCust = '<button type="button" class="btn btn-secondary" title="Add picture tags" ' + #}
        {#    'onclick="alert(\'Call your custom code here.\')">' + #}
        {#    '<i class="bi-tag"></i>' + #}
        {#    '</button>'; #}
        {# $(function () { #}
        {#    // $('input[type="file"]').change(function (e) { #}
        {#    //     let fileName = e.target.files[0].name; #}
        {#    //     $('.custom-file-label').html(fileName); #}
        {#    // }); #}

        {#    $('input[type="file"]').fileinput({ #}
        {#        overwriteInitial: true, #}
        {#        maxFileSize: 15000, #}
        {#        showClose: false, #}
        {#        showCaption: false, #}
        {#        showBrowse: false, #}
        {#        browseOnZoneClick: true, #}
        {#        removeLabel: '', #}
        {#        removeIcon: '<i class="bi-x-lg"></i>', #}
        {#        removeTitle: 'Cancel or reset changes', #}
        {#        elErrorContainer: '#kv-avatar-errors-2', #}
        {#        msgErrorClass: 'alert alert-block alert-danger', #}
        {#        defaultPreviewContent: '<img src="{{ asset('assets/default-avatar-male.png') }}" alt="Your Avatar"><h6 class="text-muted">Click to select</h6>', #}
        {#        layoutTemplates: {main2: '{preview} ' +  btnCust + ' {remove} {browse}'}, #}
        {#        allowedFileExtensions: ["jpg", "png", "gif"] #}
        {#    }); #}
        {# }); #}
    </script>
    <style>


        .kv-avatar .krajee-default.file-preview-frame, .kv-avatar .krajee-default.file-preview-frame:hover {
            margin: 0;
            padding: 0;
            border: none;
            box-shadow: none;
            text-align: center;
        }

        .kv-avatar {
            display: inline-block;
        }

        .kv-avatar .file-input {
            display: table-cell;
            width: 213px;
        }

        .kv-reqd {
            color: red;
            font-family: monospace;
            font-weight: normal;
        }

        @media (min-width: 576px) {
            .card-columns {
                column-count: 1;
            }
        }

        @media (min-width: 768px) {
            .card-columns {
                column-count: 1;
            }
        }

        @media (min-width: 992px) {
            .card-columns {
                column-count: 1;
            }
        }

        @media (min-width: 1200px) {
            .card-columns {
                column-count: 3;
            }
        }

        .multiselect-native-select {
            display: block;
        }
    </style>

{#    <link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/css/fileinput.min.css" media="all"#}
{#          rel="stylesheet" type="text/css"/>#}
    {#    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/js/plugins/buffer.min.js" type="text/javascript"></script> #}
    {#    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/js/plugins/filetype.min.js" type="text/javascript"></script> #}


    {#    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script> #}

    {#    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/js/fileinput.min.js"></script> #}
    {#    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.5.2/js/locales/LANG.js"></script> #}
{% endblock head %}

{% block bodystyle %}style="background-color: transparent;"{% endblock bodystyle %}
{% block body %}
    <style>
        .example-wrapper {
            margin: 1em auto;
            max-width: 800px;
            width: 95%;
            font: 18px/1.5 sans-serif;
        }

        .example-wrapper code {
            background: #F5F5F5;
            padding: 2px 6px;
        }
    </style>

    <div class="container-fluid">
        <h1>{{ event.title }}!</h1>
        <div class="row">
            <div class="col-lg-12">
                <div id="" style="width: 100%; height: 100%" class="image-previewer"
                     data-cropzee="new_application_attender_avatar"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-8">

                {{ form_start(attendForm) }}

                <div class="container">

                    <div class="row">
                        <div class="col">
                            {{ form_errors(attendForm) }}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">

                            {{ form_row(attendForm.attender.firstName) }}
                            {{ form_row(attendForm.attender.phone) }}
                            {{ form_row(attendForm.attender.facebookLink) }}
                        </div>
                        <div class="col">
                            {{ form_row(attendForm.attender.lastName) }}
                            {{ form_row(attendForm.attender.email) }}
                            {{ form_row(attendForm.attender.avatar) }}


{#                            <div class="kv-avatar">#}
{#                                <div class="file-loading">#}
{#                                    #}{#                                    {{ form_widget(attendForm.attender.avatar) }} #}
{#                                    <input id="{{ attendForm.attender.avatar.vars.id }}"#}
{#                                           name="{{ attendForm.attender.avatar.vars.name }}" type="file" required>#}
{#                                </div>#}
{#                            </div>#}
{#                            <div class="kv-avatar-hint">#}
{#                                <small>Select file < 1500 KB</small>#}
{#                            </div>#}
{#                            {% do attendForm.attender.avatar.setRendered %}#}


                        </div>
                    </div>

                    <div class="row" style="background: #F5F5F5">
                        <div class="col-md-6">
                            {{ form_row(attendForm.attender.countryOfLiving) }}

                            {{ form_row(attendForm.attender.gender) }}

                        </div>
                        <div class="col-md-6">

                            {{ form_row(attendForm.attender.languages) }}
                            {{ form_row(attendForm.attender.dateOfBirth) }}

                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">


                            {{ form_row(attendForm.attender.company) }}
                            {{ form_row(attendForm.attender.jobTitle) }}
                        </div>
                        <div class="col-md-6">

                            {{ form_row(attendForm.attender.fieldOfWork) }}
                            {{ form_row(attendForm.attender.knowFrom) }}
                        </div>

                    </div>
                    <div class="row" style="background: #F5F5F5">
                        <div class="col-md-6">
                            {{ form_row(attendForm.dietaryRequirements) }}
                        </div>
                        <div class="col-md-6">

                            {{ form_row(attendForm.accommodation) }}
                            {{ form_row(attendForm.accommodationComments) }}
                        </div>

                    </div>
                </div>


                <div class="row">
                    <div class="col">
                        {{ form_row(attendForm.attender.allowToShare) }}
                    </div>
                    <div class="col">
                        {{ form_row(attendForm.save, { 'label': 'Submit me' }) }}
                    </div>

                </div>


                {#                {{ form_row(attendForm.happening) }} #}


                {{ form_rest(attendForm) }}


                {{ form_end(attendForm) }}

            </div>
            <div class="col-md-6">
                {% if attenders|length > 0 %}
                    <h3>Our network for upcoming event</h3>
                {% endif %}
                <div class="card-columns">
                    {% for attender in attenders %}

                        {% if attender.allowToShare %}

                            <div class="card card-w75">
                                {% if attender.avatarFilename|length > 3 %}
                                    <img
                                            onerror="$(this).hide();"
                                            class="card-img-top"
                                            src="https://bjn2020.s3.eu-central-1.amazonaws.com/{{ attender.avatarFilename }}"
                                            alt="{{ attender.getFullName() }}"
                                    >
                                {% endif %}
                                <div class="card-body">
                                    <h5 class="card-title">{{ attender.getFullName() }}</h5>
                                    <p class="card-text">
                                        {{ attender.getFieldOfWork() }}<br>
                                        {{ attender.getJobTitle() }}<br>
                                    </p>
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
        <hr>
    </div>
{% endblock %}
